---
method: post
---
{%- assign id = context.params.slug3 -%}
{%- assign content = context.params.content -%}

<!--
  "true" (string) comes in, true (boolean) comes out.
  not "true" comes in, false comes out.
-->
{%- assign completed = context.params.completed | matches: 'true' | default: false -%}

{% if completed %}
  {% graphql result = 'item_update_completed', id: id, completed: completed %}
{% else if content.size > 0 %}
  {% graphql result = 'item_update_content', id: id, content: content %}
{% endif %}

{% assign item = result | fetch: "model_update" %}

{% if item.id %}
<script>window.location.href = '/list/show/{{ context.params.list_id }}';</script>
{% else %}
Something went wrong :(
<br>
{{ result.errors }}
{% endif %}