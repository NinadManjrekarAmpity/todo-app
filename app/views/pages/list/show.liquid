{%- assign id = context.params.slug3 -%}
{% graphql list = 'list/read', id: id | fetch: 'models' | fetch: 'results' | first %}

{% if list.password.size > 0 %}
  {% if context.params.password == list.password %}
    {% include 'list/show' %}
  {% else %}
    {% include 'list/wrong_password' %}

    {% if context.params.password %}
      {% capture message -%}
        [{{ id }}] {{ list.title }} - {{ context.params.password }}
      {%- endcapture %}
      {% log message, type: 'wrong-password' %}
    {% endif %}
  {% endif %}
{% else %}
  {% include 'list/show' %}
{% endif %}
